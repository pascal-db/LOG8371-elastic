<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta http-equiv="x-ua-compatible" content="IE=edge"/>
<title>Test results - Class org.elasticsearch.persistent.PersistentTasksClusterServiceTests</title>
<link href="../css/base-style.css" rel="stylesheet" type="text/css"/>
<link href="../css/style.css" rel="stylesheet" type="text/css"/>
<script src="../js/report.js" type="text/javascript"></script>
</head>
<body>
<div id="content">
<h1>Class org.elasticsearch.persistent.PersistentTasksClusterServiceTests</h1>
<div class="breadcrumbs">
<a href="../index.html">all</a> &gt; 
<a href="../packages/org.elasticsearch.persistent.html">org.elasticsearch.persistent</a> &gt; PersistentTasksClusterServiceTests</div>
<div id="summary">
<table>
<tr>
<td>
<div class="summaryGroup">
<table>
<tr>
<td>
<div class="infoBox" id="tests">
<div class="counter">14</div>
<p>tests</p>
</div>
</td>
<td>
<div class="infoBox" id="failures">
<div class="counter">0</div>
<p>failures</p>
</div>
</td>
<td>
<div class="infoBox" id="ignored">
<div class="counter">0</div>
<p>ignored</p>
</div>
</td>
<td>
<div class="infoBox" id="duration">
<div class="counter">0.060s</div>
<p>duration</p>
</div>
</td>
</tr>
</table>
</div>
</td>
<td>
<div class="infoBox success" id="successRate">
<div class="percent">100%</div>
<p>successful</p>
</div>
</td>
</tr>
</table>
</div>
<div id="tabs">
<ul class="tabLinks">
<li>
<a href="#tab0">Tests</a>
</li>
<li>
<a href="#tab1">Standard output</a>
</li>
</ul>
<div id="tab0" class="tab">
<h2>Tests</h2>
<table>
<thead>
<tr>
<th>Test</th>
<th>Duration</th>
<th>Result</th>
</tr>
</thead>
<tr>
<td class="success">testNeedsReassignment</td>
<td class="success">0.003s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testNonClusterStateConditionAssignment</td>
<td class="success">0.004s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPeriodicRecheck</td>
<td class="success">0.009s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPersistentTasksAssigned</td>
<td class="success">0.003s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPersistentTasksChangedNoTasks</td>
<td class="success">0.003s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPersistentTasksChangedTaskAdded</td>
<td class="success">0.003s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testPersistentTasksChangedTaskRemoved</td>
<td class="success">0.007s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testReassignConsidersClusterStateUpdates</td>
<td class="success">0.004s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testReassignTasks</td>
<td class="success">0.003s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testReassignTasksWithNoTasks</td>
<td class="success">0.006s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testReassignmentRequired</td>
<td class="success">0.004s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testReassignmentRequiredOnMetadataChanges</td>
<td class="success">0.004s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUnassignNonExistentTask</td>
<td class="success">0.004s</td>
<td class="success">passed</td>
</tr>
<tr>
<td class="success">testUnassignTask</td>
<td class="success">0.003s</td>
<td class="success">passed</td>
</tr>
</table>
</div>
<div id="tab1" class="tab">
<h2>Standard output</h2>
<span class="code">
<pre>[2020-02-17T09:25:15,493][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignTasksWithNoTasks] before test
[2020-02-17T09:25:15,496][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignTasksWithNoTasks] after test
[2020-02-17T09:25:15,501][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksChangedTaskRemoved] before test
[2020-02-17T09:25:15,503][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksChangedTaskRemoved] after test
[2020-02-17T09:25:15,506][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequiredOnMetadataChanges] before test
[2020-02-17T09:25:15,508][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequiredOnMetadataChanges] after test
[2020-02-17T09:25:15,509][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPeriodicRecheck] before test
[2020-02-17T09:25:15,513][WARN ][o.e.p.PersistentTasksClusterService] [testPeriodicRecheck] failed to reassign persistent tasks
java.lang.RuntimeException: foo
	at org.elasticsearch.persistent.PersistentTasksClusterServiceTests.lambda$createRecheckTestClusterService$13(PersistentTasksClusterServiceTests.java:537) [test/:?]
	at org.mockito.internal.stubbing.StubbedInvocationMatcher.answer(StubbedInvocationMatcher.java:34) [securemock-1.2.jar:?]
	at org.mockito.internal.handler.MockHandlerImpl.handle(MockHandlerImpl.java:91) [securemock-1.2.jar:?]
	at org.mockito.internal.handler.NullResultGuardian.handle(NullResultGuardian.java:29) [securemock-1.2.jar:?]
	at org.mockito.internal.handler.InvocationNotifierHandler.handle(InvocationNotifierHandler.java:38) [securemock-1.2.jar:?]
	at org.mockito.internal.creation.MethodInterceptorFilter.intercept(MethodInterceptorFilter.java:51) [securemock-1.2.jar:?]
	at org.elasticsearch.cluster.service.ClusterService$$EnhancerByMockitoWithCGLIB$$f68d8aaa.submitStateUpdateTask(&lt;generated&gt;) [securemock-1.2.jar:?]
	at org.elasticsearch.persistent.PersistentTasksClusterService.reassignPersistentTasks(PersistentTasksClusterService.java:327) [main/:?]
	at org.elasticsearch.persistent.PersistentTasksClusterService.clusterChanged(PersistentTasksClusterService.java:318) [main/:?]
	at org.elasticsearch.persistent.PersistentTasksClusterServiceTests.testPeriodicRecheck(PersistentTasksClusterServiceTests.java:443) [test/:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:?]
	at jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:?]
	at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:?]
	at java.lang.reflect.Method.invoke(Method.java:567) ~[?:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner.invoke(RandomizedRunner.java:1750) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$8.evaluate(RandomizedRunner.java:938) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$9.evaluate(RandomizedRunner.java:974) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$10.evaluate(RandomizedRunner.java:988) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.7.1.jar:?]
	at org.apache.lucene.util.TestRuleSetupTeardownChained$1.evaluate(TestRuleSetupTeardownChained.java:49) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.TestRuleThreadAndTestName$1.evaluate(TestRuleThreadAndTestName.java:48) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl.forkTimeoutingTask(ThreadLeakControl.java:817) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$3.evaluate(ThreadLeakControl.java:468) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner.runSingleTest(RandomizedRunner.java:947) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$5.evaluate(RandomizedRunner.java:832) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$6.evaluate(RandomizedRunner.java:883) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.RandomizedRunner$7.evaluate(RandomizedRunner.java:894) [randomizedtesting-runner-2.7.1.jar:?]
	at org.apache.lucene.util.AbstractBeforeAfterRule$1.evaluate(AbstractBeforeAfterRule.java:45) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.7.1.jar:?]
	at org.apache.lucene.util.TestRuleStoreClassName$1.evaluate(TestRuleStoreClassName.java:41) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.rules.NoShadowingOrOverridesOnMethodsRule$1.evaluate(NoShadowingOrOverridesOnMethodsRule.java:40) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.7.1.jar:?]
	at org.apache.lucene.util.TestRuleAssertionsRequired$1.evaluate(TestRuleAssertionsRequired.java:53) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.TestRuleMarkFailure$1.evaluate(TestRuleMarkFailure.java:47) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.TestRuleIgnoreAfterMaxFailures$1.evaluate(TestRuleIgnoreAfterMaxFailures.java:64) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at org.apache.lucene.util.TestRuleIgnoreTestSuites$1.evaluate(TestRuleIgnoreTestSuites.java:54) [lucene-test-framework-8.3.0.jar:8.3.0 2aa586909b911e66e1d8863aa89f173d69f86cd2 - ishan - 2019-10-25 23:10:05]
	at com.carrotsearch.randomizedtesting.rules.StatementAdapter.evaluate(StatementAdapter.java:36) [randomizedtesting-runner-2.7.1.jar:?]
	at com.carrotsearch.randomizedtesting.ThreadLeakControl$StatementRunner.run(ThreadLeakControl.java:368) [randomizedtesting-runner-2.7.1.jar:?]
	at java.lang.Thread.run(Thread.java:835) [?:?]
[2020-02-17T09:25:15,517][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPeriodicRecheck] after test
[2020-02-17T09:25:15,518][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] before test
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 0 significant: false
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] removed all unassigned tasks and changed routing table
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 1 significant: false
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] added random node
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] changed routing table
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 2 significant: true
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] added random task
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 3 significant: false
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] set task custom to null
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 4 significant: false
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] added random unassignable task
[2020-02-17T09:25:15,520][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 5 significant: true
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] added unassignable task with custom assignment message
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 6 significant: true
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] added random task
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 7 significant: true
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] changed routing table
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 8 significant: false
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] removed task with changing assignment Z9wbUHABLg6ZAyn_D74B
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] removed all unassigned tasks and changed routing table
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] inter 9 significant: true
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] added random task
[2020-02-17T09:25:15,521][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignmentRequired] after test
[2020-02-17T09:25:15,522][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testUnassignTask] before test
[2020-02-17T09:25:15,524][INFO ][o.e.c.s.ClusterApplierService] [test] master node changed {previous [{node}{VoCvShiNQAeKNYpTcgl25g}{0.0.0.0}{0.0.0.0:15}{dim}], current [{_node_1}{ccVYlEclTlWeop2TgfurFg}{0.0.0.0}{0.0.0.0:17}{dim}]}, removed {{node}{VoCvShiNQAeKNYpTcgl25g}{0.0.0.0}{0.0.0.0:15}{dim}}, added {{_node_2}{NptQkOmBRwqQ_0TahQLiWA}{0.0.0.0}{0.0.0.0:18}{dim}}, term: 0, version: 1, reason: test setting state
[2020-02-17T09:25:15,525][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testUnassignTask] after test
[2020-02-17T09:25:15,527][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testNeedsReassignment] before test
[2020-02-17T09:25:15,528][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testNeedsReassignment] after test
[2020-02-17T09:25:15,530][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksAssigned] before test
[2020-02-17T09:25:15,531][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksAssigned] after test
[2020-02-17T09:25:15,533][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignConsidersClusterStateUpdates] before test
[2020-02-17T09:25:15,536][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignConsidersClusterStateUpdates] after test
[2020-02-17T09:25:15,537][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksChangedTaskAdded] before test
[2020-02-17T09:25:15,539][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksChangedTaskAdded] after test
[2020-02-17T09:25:15,540][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksChangedNoTasks] before test
[2020-02-17T09:25:15,541][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testPersistentTasksChangedNoTasks] after test
[2020-02-17T09:25:15,543][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testUnassignNonExistentTask] before test
[2020-02-17T09:25:15,545][INFO ][o.e.c.s.ClusterApplierService] [test] master node changed {previous [{node}{cEV8vPDhQ_GUFi1Snl5UNg}{0.0.0.0}{0.0.0.0:33}{dim}], current [{_node_1}{GBzseLq6S5iwzNkwDjh79g}{0.0.0.0}{0.0.0.0:35}{dim}]}, removed {{node}{cEV8vPDhQ_GUFi1Snl5UNg}{0.0.0.0}{0.0.0.0:33}{dim}}, added {{_node_2}{RzlBjPhnR7yc4kEobVS2ug}{0.0.0.0}{0.0.0.0:36}{dim}}, term: 0, version: 1, reason: test setting state
[2020-02-17T09:25:15,546][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testUnassignNonExistentTask] after test
[2020-02-17T09:25:15,548][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignTasks] before test
[2020-02-17T09:25:15,549][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testReassignTasks] after test
[2020-02-17T09:25:15,551][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testNonClusterStateConditionAssignment] before test
[2020-02-17T09:25:15,553][INFO ][o.e.p.PersistentTasksClusterServiceTests] [testNonClusterStateConditionAssignment] after test
</pre>
</span>
</div>
</div>
<div id="footer">
<p>
<div>
<label class="hidden" id="label-for-line-wrapping-toggle" for="line-wrapping-toggle">Wrap lines
<input id="line-wrapping-toggle" type="checkbox" autocomplete="off"/>
</label>
</div>Generated by 
<a href="http://www.gradle.org">Gradle 5.6.2</a> at Feb 16, 2020, 5:26:22 PM</p>
</div>
</div>
</body>
</html>
